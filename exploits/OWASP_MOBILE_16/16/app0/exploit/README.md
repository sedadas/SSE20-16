# App0 - M2: Insecure Data Storage [1]
[toc]

## App Decription
With the app a user has to perform a simple login to access another screen. Since the login mechanism is mocked, both username and password are hardcoded (username: _sse_ / password: _topsecret_). The app provides a feature to store entered login information, which is the part of this application that can be expoilted.


## Build
To build the app, run either `build-windows.bat` (Windows) or `build-linux.sh` (Linux). These scripts create an Android-package in the `\app0\src\app\build\outputs\apk\debug` folder called `app-debug.apk`.

The package can be installed on any Android phone with Android 7 or higher. To install the application, the option _"Unknown source"_ in the device settings must be activated.


## Vulnerability
As mentioned before, the user can check a checkbox to store his or her credentials. In the unpached version, the `ExternalAuthenticationStorageManager` stores username and password in a file within the external storage of the device[2]. Since this part of an Android phone is accessable for both the user and other apps running on the device, it is a pretty unsecure place to store sensitive data like login credentials[3]. The file with username and password can be found in _/storage/emulated/0/Android/data/at.ac.tuwien.sse.owaspm2/files/_.

The patched version uses a class called `SharedPrefsAuthenticationStorageManager` to saves login information in the apps internal storage. To be more precises the app saves the data as key-value pairs in so called "shared prefences"[4]. Compared to the external storage, the shared preferences within the internal storage can only be accessed by the app itself (as long as we can asume that other apps don't have superuser privileges). As an upgrade to the unpached version, the patched one also stores only the username and a session id instead of the users password.


## References
[1] OWASP, M2: Insecure Data Storage, last accessed on 2020-05-20: https://owasp.org/www-project-mobile-top-10/2016-risks/m2-insecure-data-storage
[2] Android Developers, Access app-specific files, last accessed on 2020-05-20: https://developer.android.com/training/data-storage/app-specific#external
[3] Android Developers, Data and file storage overview, last accessed on 2020-05-20: https://developer.android.com/training/data-storage
[4] Android Developers, Save key-value data, last accessed on 2020-05-20: https://developer.android.com/training/data-storage/shared-preferences